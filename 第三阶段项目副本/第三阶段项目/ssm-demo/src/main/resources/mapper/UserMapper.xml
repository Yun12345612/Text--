<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cykj.mapper.UserMapper">
    <!-- 用户注册 -->
    <insert id="insertUser">
        insert into user (name,
                          gender,
                          account,
                          password,
                          age,
                          phone,
                          id_card,
                          salt,
                          email,
                          create_time)
        values (#{userName},
                #{userGender},
                #{userAccount},
                #{userPassword},
                #{userAge},
                #{userPhone},
                #{userCard},
                #{salt},
                #{userEmail},
                now())
    </insert>

    <!-- 用户登录 - 支持账号/手机号/身份证号登录 -->
    <select id="getUserByAccountOrPhoneOrCard" resultType="com.cykj.pojo.User">
        select user_id       as userId,
               user_name     as userName,
               user_account  as userAccount,
               user_password as userPassword,
               user_phone    as userPhone,
               user_card  as userCard,
               salt     as salt
        from user
        where user_account = #{loginInput}
           or user_phone = #{loginInput}
           or user_card = #{loginInput}
    </select>

    <!-- 注册验证 - 根据账号查询 -->
    <select id="getUserByAccount" resultType="com.cykj.pojo.User">
        select id from user where name = #{userAccount}
    </select>

    <!-- 注册验证 - 根据手机号查询 -->
    <select id="getUserByPhone" resultType="com.cykj.pojo.User">
        select id from user where phone = #{userPhone}
    </select>

    <!-- 注册验证 - 根据身份证号查询-->
    <select id="getUserByCard" resultType="com.cykj.pojo.User">
        select id from user where id_card = #{userCard}
    </select>
</mapper>